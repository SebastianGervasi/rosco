<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rosco de Pasapalabra - Modo Anfitrión</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            width: 100%;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        /* Pantalla de configuración */
        .setup-screen {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }

        .setup-screen h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .setup-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-group {
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .start-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 10px;
        }

        .start-btn:active {
            transform: scale(0.98);
        }

        /* Pantalla de cuenta regresiva */
        .countdown-screen {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 300px;
            width: 100%;
        }

        .countdown-number {
            font-size: 4em;
            font-weight: bold;
            color: #667eea;
            margin: 15px 0;
            animation: countdownPulse 0.6s ease-in-out;
        }

        @keyframes countdownPulse {
            0% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .countdown-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 10px;
        }

        /* Pantalla de juego */
        .game-screen {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            min-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        /* Header del juego */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            flex-shrink: 0;
        }

        .player-info {
            text-align: center;
            flex: 1;
        }

        .player-info h2 {
            color: #333;
            font-size: 1.1em;
            margin-bottom: 2px;
        }

        .player-info p {
            color: #666;
            font-size: 0.8em;
        }

        .timer {
            font-size: 1.8em;
            font-weight: bold;
            color: #e74c3c;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 10px;
            border: 2px solid #e74c3c;
            min-width: 80px;
            text-align: center;
        }

        .timer.warning {
            animation: pulse 1s infinite;
        }

        .timer.paused {
            color: #ffc107;
            border-color: #ffc107;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .game-controls {
            display: flex;
            gap: 5px;
        }

        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 35px;
        }

        .pause-btn {
            background: #ffc107;
            color: #333;
        }

        .restart-btn {
            background: #6c757d;
            color: white;
            display: none;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        /* Contenido principal del juego */
        .game-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        /* Rosco circular - ARRIBA */
        .rosco-container {
            position: relative;
            width: 280px;
            height: 280px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rosco {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            background: #f8f9fa;
            border: 4px solid #333;
        }

        .letter {
            position: absolute;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #e9ecef;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            transition: all 0.3s;
        }

        .letter.current {
            background: #007bff;
            color: white;
            border-color: #0056b3;
            transform: scale(1.3);
            z-index: 10;
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
        }

        .letter.correct {
            background: #28a745;
            color: white;
            border-color: #1e7e34;
        }

        .letter.incorrect {
            background: #dc3545;
            color: white;
            border-color: #c82333;
        }

        .letter.pasapalabra {
            background: #ffc107;
            color: #333;
            border-color: #f39c12;
        }

        /* Centro del rosco */
        .rosco-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
            border: 3px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 15px;
        }

        .question-text {
            font-size: 11px;
            line-height: 1.3;
            color: #333;
            font-weight: 700;
            text-align: center;
        }

        /* Panel de control del anfitrión - ABAJO */
        .host-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #007bff;
            width: 100%;
            max-width: 280px; /* Mismo ancho que el rosco para alineación */
            flex-shrink: 0;
            align-self: center; /* Centrar el panel */
        }

        .current-letter-display {
            text-align: center;
            margin-bottom: 15px;
        }

        .current-letter-display .letter-big {
            font-size: 2em;
            font-weight: bold;
            color: white;
            background: #007bff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            border: 2px solid #0056b3;
        }

        .current-letter-display p {
            font-size: 0.8em;
            color: #666;
            margin: 0;
        }

        .answer-display {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #2196f3;
            text-align: center;
        }

        .answer-display h4 {
            color: #1976d2;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .correct-answer {
            font-size: 1.3em;
            font-weight: bold;
            color: #1976d2;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #2196f3;
        }

        .question-type {
            background: #fff3cd;
            color: #856404;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 8px;
            display: inline-block;
            border: 1px solid #ffc107;
        }

        /* BOTONES EN LA MISMA LÍNEA */
        .host-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        .host-btn {
            padding: 15px 8px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .host-btn:active {
            transform: scale(0.95);
        }

        .host-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-correct {
            background: #28a745;
            color: white;
            border: 2px solid #1e7e34;
        }

        .btn-incorrect {
            background: #dc3545;
            color: white;
            border: 2px solid #c82333;
        }

        .btn-pasapalabra {
            background: #ffc107;
            color: #333;
            border: 2px solid #f39c12;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            text-align: center;
        }

        .stat {
            padding: 8px 4px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 12px;
        }

        .stat.correct { 
            background: #d4edda; 
            color: #155724;
            border: 1px solid #28a745;
        }
        .stat.incorrect { 
            background: #f8d7da; 
            color: #721c24;
            border: 1px solid #dc3545;
        }
        .stat.pasapalabra { 
            background: #fff3cd; 
            color: #856404;
            border: 1px solid #ffc107;
        }

        /* Modal de pausa */
        .pause-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .pause-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 350px;
            margin: 20px;
        }

        .pause-content h2 {
            color: #dc3545;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .wrong-answer {
            font-size: 1.3em;
            color: #dc3545;
            font-weight: bold;
            margin: 15px 0;
            padding: 12px;
            background: #f8d7da;
            border-radius: 8px;
            border: 1px solid #dc3545;
        }

        .resume-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
        }

        .resume-btn:active {
            transform: scale(0.95);
        }

        /* Pantalla de resultados */
        .results-screen {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .results-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .results-header h1 {
            color: #333;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .final-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .final-stat {
            text-align: center;
            padding: 15px 10px;
            border-radius: 8px;
            font-weight: bold;
            border: 2px solid;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .results-table th,
        .results-table td {
            padding: 8px 4px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .results-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #333;
            font-size: 11px;
        }

        .results-table tr.correct { background: #d4edda; }
        .results-table tr.incorrect { background: #f8d7da; }
        .results-table tr.pasapalabra { background: #fff3cd; }

        .question-type-cell {
            font-size: 10px;
            color: #666;
            font-style: italic;
        }

        .play-again-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            font-weight: 600;
        }

        .play-again-btn:active {
            transform: scale(0.95);
        }

        /* Responsive para pantallas muy pequeñas */
        @media (max-width: 400px) {
            .container {
                padding: 5px;
            }

            .game-screen {
                padding: 10px;
                min-height: 95vh;
            }

            .rosco-container {
                width: 240px;
                height: 240px;
            }

            .host-panel {
                max-width: 240px; /* Alineado con el rosco más pequeño */
            }

            .letter {
                width: 24px;
                height: 24px;
                font-size: 11px;
            }

            .rosco-center {
                width: 120px;
                height: 120px;
                padding: 12px;
            }

            .question-text {
                font-size: 10px;
                line-height: 1.2;
            }

            .host-btn {
                padding: 12px 6px;
                font-size: 11px;
                min-height: 45px;
            }

            .current-letter-display .letter-big {
                width: 45px;
                height: 45px;
                font-size: 1.8em;
            }

            .correct-answer {
                font-size: 1.1em;
                padding: 6px;
            }

            .timer {
                font-size: 1.5em;
                padding: 6px 12px;
            }
        }

        /* Landscape mode para móviles */
        @media (max-height: 600px) and (orientation: landscape) {
            .game-screen {
                min-height: 95vh;
                padding: 8px;
            }

            .rosco-container {
                width: 200px;
                height: 200px;
            }

            .host-panel {
                max-width: 200px; /* Alineado con el rosco en landscape */
            }

            .letter {
                width: 22px;
                height: 22px;
                font-size: 10px;
            }

            .rosco-center {
                width: 100px;
                height: 100px;
                padding: 8px;
            }

            .question-text {
                font-size: 9px;
                line-height: 1.1;
            }

            .host-panel {
                padding: 10px;
            }

            .host-btn {
                padding: 10px 6px;
                font-size: 11px;
                min-height: 40px;
            }

            .game-header {
                margin-bottom: 10px;
            }

            .game-content {
                gap: 15px;
            }
        }

        /* Optimizaciones para touch */
        @media (hover: none) and (pointer: coarse) {
            .host-btn:hover,
            .control-btn:hover,
            .start-btn:hover,
            .resume-btn:hover,
            .play-again-btn:hover {
                transform: none;
            }

            .host-btn:active,
            .control-btn:active,
            .start-btn:active,
            .resume-btn:active,
            .play-again-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s;
            }
        }

        /* Asegurar centrado perfecto */
        .game-screen {
            display: flex !important;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Mejorar legibilidad */
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de configuración -->
        <div class="setup-screen" id="setupScreen">
            <h1>🎯 Rosco de Pasapalabra</h1>
            <h3 style="color: #666; margin-bottom: 20px; font-size: 1em;">Modo Anfitrión</h3>
            <form class="setup-form" id="setupForm">
                <div class="input-group">
                    <label for="playerName">Nombre del jugador:</label>
                    <input type="text" id="playerName" required placeholder="Ingresa el nombre del jugador">
                </div>
                
                <div class="input-group">
                    <label for="gameTime">Tiempo de juego (segundos):</label>
                    <input type="number" id="gameTime" value="90" min="30" max="300" required>
                </div>

                <button type="submit" class="start-btn">¡Comenzar Juego!</button>
            </form>
        </div>

        <!-- Pantalla de cuenta regresiva -->
        <div class="countdown-screen" id="countdownScreen">
            <div class="countdown-text">El juego comenzará en...</div>
            <div class="countdown-number" id="countdownNumber">3</div>
            <div style="color: #666; font-size: 0.9em;">¡Prepárate!</div>
        </div>

        <!-- Pantalla de juego -->
        <div class="game-screen" id="gameScreen">
            <!-- Header del juego -->
            <div class="game-header">
                <div class="game-controls">
                    <button class="control-btn pause-btn" id="pauseBtn">⏸</button>
                    <button class="control-btn restart-btn" id="restartBtn">🔄</button>
                </div>
                
                <div class="player-info">
                    <h2 id="playerNameDisplay"></h2>
                    <p>Pasapalabra</p>
                </div>
                
                <div class="timer" id="timer">90</div>
            </div>

            <!-- Contenido principal -->
            <div class="game-content">
                <!-- Rosco arriba -->
                <div class="rosco-container">
                    <div class="rosco" id="rosco">
                        <!-- Las letras se generarán dinámicamente -->
                    </div>
                    <div class="rosco-center">
                        <div class="question-text" id="questionText">
                            ¡El juego comenzará en breve!
                        </div>
                    </div>
                </div>

                <!-- Panel del anfitrión abajo (SIN TÍTULO) -->
                <div class="host-panel">
                    <div class="current-letter-display">
                        <div class="letter-big" id="currentLetterBig">A</div>
                        <p><strong>Letra actual</strong></p>
                    </div>

                    <div class="answer-display">
                        <div class="question-type" id="questionType">Empieza por la letra</div>
                        <h4>Respuesta correcta:</h4>
                        <div class="correct-answer" id="correctAnswer">-</div>
                    </div>

                    <!-- BOTONES EN LA MISMA LÍNEA -->
                    <div class="host-controls">
                        <button class="host-btn btn-correct" id="correctBtn" disabled>✓ CORRECTA</button>
                        <button class="host-btn btn-incorrect" id="incorrectBtn" disabled>✗ INCORRECTA</button>
                        <button class="host-btn btn-pasapalabra" id="pasapalabraBtn" disabled>⏭ PASAPALABRA</button>
                    </div>

                    <div class="stats">
                        <div class="stat correct">
                            <div>Correctas</div>
                            <div id="correctCount">0</div>
                        </div>
                        <div class="stat incorrect">
                            <div>Incorrectas</div>
                            <div id="incorrectCount">0</div>
                        </div>
                        <div class="stat pasapalabra">
                            <div>Pasapalabra</div>
                            <div id="pasapalabraCount">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de pausa por respuesta incorrecta -->
        <div class="pause-modal" id="pauseModal">
            <div class="pause-content">
                <h2>❌ Respuesta Incorrecta</h2>
                <p>La respuesta correcta era:</p>
                <div class="wrong-answer" id="wrongAnswerDisplay"></div>
                <button class="resume-btn" id="resumeBtn">Continuar con la siguiente letra</button>
            </div>
        </div>

        <!-- Pantalla de resultados -->
        <div class="results-screen" id="resultsScreen">
            <div class="results-header">
                <h1>🏁 ¡JUEGO FINALIZADO!</h1>
                <h2 id="finalPlayerName" style="font-size: 1.2em; color: #666;"></h2>
            </div>

            <div class="final-stats">
                <div class="final-stat correct" style="border-color: #28a745;">
                    <h3 id="finalCorrect">0</h3>
                    <p>Correctas</p>
                </div>
                <div class="final-stat incorrect" style="border-color: #dc3545;">
                    <h3 id="finalIncorrect">0</h3>
                    <p>Incorrectas</p>
                </div>
                <div class="final-stat pasapalabra" style="border-color: #ffc107;">
                    <h3 id="finalPasapalabra">0</h3>
                    <p>Pasapalabra</p>
                </div>
                <div class="final-stat" style="background: #e3f2fd; color: #0d47a1; border-color: #2196f3;">
                    <h3 id="finalTime">0</h3>
                    <p>Tiempo usado</p>
                </div>
            </div>

            <div style="overflow-x: auto;">
                <table class="results-table" id="resultsTable">
                    <thead>
                        <tr>
                            <th>Letra</th>
                            <th>Tipo</th>
                            <th>Pregunta</th>
                            <th>Respuesta</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="resultsTableBody">
                        <!-- Se llenará dinámicamente -->
                    </tbody>
                </table>
            </div>

            <button class="play-again-btn" onclick="location.reload()">Jugar de Nuevo</button>
        </div>
    </div>

    <script>
        // Configuración del juego
        let gameConfig = {
            playerName: '',
            gameTime: 90
        };

        // Estado del juego
        let gameState = {
            currentLetter: 0,
            timeLeft: 90,
            timer: null,
            gameStarted: false,
            gameEnded: false,
            gamePaused: false,
            stats: { correct: 0, incorrect: 0, pasapalabra: 0 },
            answers: {},
            usedQuestions: new Set() // Para evitar repetir preguntas
        };

        // Banco completo de preguntas del rosco con múltiples opciones por letra
        const questionBank = {
    'A': [
        { type: 'starts', question: 'A: Vehículo que vuela', answer: 'AVION' },
        { type: 'starts', question: 'A: Líquido transparente e incoloro que bebemos', answer: 'AGUA' },
        { type: 'starts', question: 'A: Ave rapaz de gran tamaño que vuela muy alto', answer: 'AGUILA' },
        { type: 'starts', question: 'A: Fruto del manzano, generalmente de color rojo o verde', answer: 'MANZANA' },
        { type: 'starts', question: 'A: Vehículo de motor con cuatro ruedas', answer: 'AUTO' },
        { type: 'contains', question: 'Contiene A: Instrumento musical de cuerda que se toca con los dedos', answer: 'GUITARRA' },
        { type: 'contains', question: 'Contiene A: Grasa para cocinar producida con leche', answer: 'MANTECA' },
        { type: 'contains', question: 'Contiene A: Deporte que se juega en una cancha con pelota naranja', answer: 'BASQUET' }
    ],
    'B': [
        { type: 'starts', question: 'B: Embarcación que navega por el agua', answer: 'BARCO' },
        { type: 'starts', question: 'B: Fruto amarillo alargado que comen los monos', answer: 'BANANA' },
        { type: 'starts', question: 'B: Deporte que se juega con pelota naranja y canastas', answer: 'BASQUET' },
        { type: 'starts', question: 'B: Lugar donde se guardan y prestan libros', answer: 'BIBLIOTECA' },
        { type: 'starts', question: 'B: Recipiente de vidrio para líquidos', answer: 'BOTELLA' },
        { type: 'contains', question: 'Contiene B: Conjunto de hojas de papel encuadernadas', answer: 'LIBRO' },
        { type: 'contains', question: 'Contiene B: Mueble donde se duerme', answer: 'CAMA' },
        { type: 'contains', question: 'Contiene B: Profesión que apaga incendios', answer: 'BOMBERO' }
    ],
    'C': [
        { type: 'starts', question: 'C: Animal doméstico felino que maúlla', answer: 'GATO' },
        { type: 'starts', question: 'C: Vehículo de cuatro ruedas movido por motor', answer: 'COCHE' },
        { type: 'starts', question: 'C: Edificio donde vive una familia', answer: 'CASA' },
        { type: 'starts', question: 'C: Órgano que bombea sangre', answer: 'CORAZON' },
        { type: 'starts', question: 'C: Aparato para hacer fotografías', answer: 'CAMARA' },
        { type: 'contains', question: 'Contiene C: Instrumento para escribir con tinta', answer: 'LAPICERO' },
        { type: 'contains', question: 'Contiene C: Deporte que se juega con los pies', answer: 'FUTBOL' },
        { type: 'contains', question: 'Contiene C: Lugar donde se prepara la comida', answer: 'COCINA' }
    ],
    'D': [
        { type: 'starts', question: 'D: Cada una de las piezas que tenemos en la boca para masticar', answer: 'DIENTE' },
        { type: 'starts', question: 'D: Moneda de curso legal', answer: 'DINERO' },
        { type: 'starts', question: 'D: Período de veinticuatro horas', answer: 'DIA' },
        { type: 'starts', question: 'D: Instrumento musical de percusión', answer: 'TAMBOR' },
        { type: 'contains', question: 'Contiene D: Lugar donde se estudia', answer: 'ESCUELA' },
        { type: 'contains', question: 'Contiene D: Aparato para escuchar música', answer: 'RADIO' },
        { type: 'contains', question: 'Contiene D: Juego de mesa con fichas numeradas', answer: 'DOMINO' }
    ],
    'E': [
        { type: 'starts', question: 'E: Animal mamífero con trompa muy larga', answer: 'ELEFANTE' },
        { type: 'starts', question: 'E: Lugar donde se enseña y se aprende', answer: 'ESCUELA' },
        { type: 'starts', question: 'E: Construcción que tiene varios pisos', answer: 'EDIFICIO' },
        { type: 'starts', question: 'E: Aparato para subir y bajar entre pisos', answer: 'ASCENSOR' },
        { type: 'contains', question: 'Contiene E: Vehículo de dos ruedas', answer: 'BICICLETA' },
        { type: 'contains', question: 'Contiene E: Deporte que se juega con raqueta', answer: 'TENIS' },
        { type: 'contains', question: 'Contiene E: Astro que nos da luz y calor', answer: 'SOL' }
    ],
    'F': [
        { type: 'starts', question: 'F: Deporte que se juega con los pies y pelota redonda', answer: 'FUTBOL' },
        { type: 'starts', question: 'F: Conjunto de personas que viven juntas', answer: 'FAMILIA' },
        { type: 'starts', question: 'F: Elemento que produce llama y calor', answer: 'FUEGO' },
        { type: 'starts', question: 'F: Recipiente de vidrio para líquidos', answer: 'FRASCO' },
        { type: 'contains', question: 'Contiene F: Aparato para hablar a distancia', answer: 'TELEFONO' },
        { type: 'contains', question: 'Contiene F: Lugar donde se hacen películas', answer: 'ESTUDIO' },
        { type: 'contains', question: 'Contiene F: Mueble para dormir', answer: 'SOFA' }
    ],
    'G': [
        { type: 'starts', question: 'G: Animal doméstico felino que maúlla', answer: 'GATO' },
        { type: 'starts', question: 'G: Prenda de vestir para las manos', answer: 'GUANTE' },
        { type: 'starts', question: 'G: Conflicto armado entre países', answer: 'GUERRA' },
        { type: 'starts', question: 'G: Instrumento musical de cuerda', answer: 'GUITARRA' },
        { type: 'starts', question: 'G: Lugar donde se guardan los coches', answer: 'GARAJE' },
        { type: 'contains', question: 'Contiene G: Juego de mesa con fichas blancas y negras', answer: 'AJEDREZ' },
        { type: 'contains', question: 'Contiene G: Deporte que se juega con palos y pelota pequeña', answer: 'GOLF' }
    ],
    'H': [
        { type: 'starts', question: 'H: Lugar donde se atiende a los enfermos', answer: 'HOSPITAL' },
        { type: 'starts', question: 'H: Edificio donde se alojan los viajeros', answer: 'HOTEL' },
        { type: 'starts', question: 'H: Persona de sexo masculino', answer: 'HOMBRE' },
        { type: 'starts', question: 'H: Lugar donde se vive', answer: 'HOGAR' },
        { type: 'contains', question: 'Contiene H: Vehículo de dos ruedas', answer: 'BICICLETA' },
        { type: 'contains', question: 'Contiene H: Utensilio para comer sopa', answer: 'CUCHARA' },
        { type: 'contains', question: 'Contiene H: Vehículo que vuela', answer: 'HELICOPTERO' }
    ],
    'I': [
        { type: 'starts', question: 'I: País europeo con forma de bota', answer: 'ITALIA' },
        { type: 'starts', question: 'I: Lengua que se habla en un país', answer: 'IDIOMA' },
        { type: 'starts', question: 'I: Lugar donde se reza', answer: 'IGLESIA' },
        { type: 'starts', question: 'I: Estación del año más fría', answer: 'INVIERNO' },
        { type: 'contains', question: 'Contiene I: Aparato para planchar ropa', answer: 'PLANCHA' },
        { type: 'contains', question: 'Contiene I: Deporte que se juega en el agua', answer: 'NATACION' },
        { type: 'contains', question: 'Contiene I: Lugar donde se hacen películas', answer: 'CINE' }
    ],
    'J': [
        { type: 'starts', question: 'J: Piedra preciosa de color verde', answer: 'JADE' },
        { type: 'starts', question: 'J: Actividad recreativa con reglas', answer: 'JUEGO' },
        { type: 'starts', question: 'J: Día de la semana antes del viernes', answer: 'JUEVES' },
        { type: 'starts', question: 'J: Recipiente para contener agua', answer: 'JARRA' },
        { type: 'starts', question: 'J: Lugar donde se imparte justicia', answer: 'JUZGADO' },
        { type: 'contains', question: 'Contiene J: Persona que trabaja en una oficina', answer: 'EJECUTIVO' },
        { type: 'contains', question: 'Contiene J: Insecto que produce miel', answer: 'ABEJA' }
    ],
    'K': [
        { type: 'starts', question: 'K: Arte marcial japonés', answer: 'KARATE' },
        { type: 'starts', question: 'K: Unidad de peso equivalente a mil gramos', answer: 'KILO' },
        { type: 'starts', question: 'K: Fruto de color verde y peludo', answer: 'KIWI' },
        { type: 'starts', question: 'K: Prenda tradicional japonesa', answer: 'KIMONO' },
        { type: 'contains', question: 'Contiene K: Deporte que se practica en el agua', answer: 'KAYAK' },
        { type: 'contains', question: 'Contiene K: Bebida alcohólica rusa', answer: 'VODKA' },
        { type: 'contains', question: 'Contiene K: Lugar donde se prepara la comida', answer: 'COCINA' }
    ],
    'L': [
        { type: 'starts', question: 'L: Satélite natural de la Tierra', answer: 'LUNA' },
        { type: 'starts', question: 'L: Conjunto de hojas de papel encuadernadas', answer: 'LIBRO' },
        { type: 'starts', question: 'L: Instrumento para escribir', answer: 'LAPIZ' },
        { type: 'starts', question: 'L: Lugar donde se hacen experimentos', answer: 'LABORATORIO' },
        { type: 'starts', question: 'L: Aparato para dar luz', answer: 'LAMPARA' },
        { type: 'contains', question: 'Contiene L: Deporte que se juega con pelota', answer: 'VOLEIBOL' },
        { type: 'contains', question: 'Contiene L: Vehículo que vuela', answer: 'HELICOPTERO' }
    ],
    'M': [
        { type: 'starts', question: 'M: Fruto del manzano', answer: 'MANZANA' },
        { type: 'starts', question: 'M: Lugar donde se venden productos', answer: 'MERCADO' },
        { type: 'starts', question: 'M: Persona que enseña', answer: 'MAESTRO' },
        { type: 'starts', question: 'M: Mueble donde se come', answer: 'MESA' },
        { type: 'starts', question: 'M: Arte de los sonidos', answer: 'MUSICA' },
        { type: 'contains', question: 'Contiene M: Aparato para ver programas', answer: 'TELEVISION' },
        { type: 'contains', question: 'Contiene M: Grasa para cocinar hecha con leche', answer: 'MANTECA' }
    ],
    'N': [
        { type: 'starts', question: 'N: Punto cardinal opuesto al sur', answer: 'NORTE' },
        { type: 'starts', question: 'N: Embarcación que navega por el mar', answer: 'NAVE' },
        { type: 'starts', question: 'N: Período de oscuridad', answer: 'NOCHE' },
        { type: 'starts', question: 'N: Persona recién nacida', answer: 'NIÑO' },
        { type: 'contains', question: 'Contiene N: Aparato para hacer ejercicio', answer: 'BICICLETA' },
        { type: 'contains', question: 'Contiene N: Lugar donde se duerme', answer: 'DORMITORIO' },
        { type: 'contains', question: 'Contiene N: Deporte acuático', answer: 'NATACION' }
    ],
    'O': [
        { type: 'starts', question: 'O: Metal precioso de color amarillo', answer: 'ORO' },
        { type: 'starts', question: 'O: Órgano de la vista', answer: 'OJO' },
        { type: 'starts', question: 'O: Mamífero grande peludo', answer: 'OSO' },
        { type: 'starts', question: 'O: Estación del año entre verano e invierno', answer: 'OTOÑO' },
        { type: 'starts', question: 'O: Lugar donde se trabaja', answer: 'OFICINA' },
        { type: 'contains', question: 'Contiene O: Aparato para escuchar música', answer: 'RADIO' },
        { type: 'contains', question: 'Contiene O: Deporte que se juega con los pies', answer: 'FUTBOL' }
    ],
    'P': [
        { type: 'starts', question: 'P: Ave que no puede volar y vive en el polo sur', answer: 'PINGUINO' },
        { type: 'starts', question: 'P: Fruta tropical con corona verde', answer: 'PIÑA' },
        { type: 'starts', question: 'P: Lugar público para pasear', answer: 'PLAZA' },
        { type: 'starts', question: 'P: Utensilio para escribir', answer: 'PLUMA' },
        { type: 'starts', question: 'P: Aparato para planchar', answer: 'PLANCHA' },
        { type: 'contains', question: 'Contiene P: Aparato para hacer fotografías', answer: 'CAMARA' },
        { type: 'contains', question: 'Contiene P: Deporte acuático', answer: 'WATERPOLO' }
    ],
    'Q': [
        { type: 'starts', question: 'Q: Producto lácteo que se hace con leche', answer: 'QUESO' },
        { type: 'starts', question: 'Q: Acción de amar', answer: 'QUERER' },
        { type: 'starts', question: 'Q: Combustible derivado del petróleo', answer: 'QUEROSENO' },
        { type: 'starts', question: 'Q: Sonido de protesta', answer: 'QUEJA' },
        { type: 'contains', question: 'Contiene Q: Deporte que se juega con raqueta', answer: 'SQUASH' },
        { type: 'contains', question: 'Contiene Q: Conjunto musical', answer: 'ORQUESTA' },
        { type: 'contains', question: 'Contiene Q: Juguete que vuela con viento', answer: 'BARRILETE' }
    ],
    'R': [
        { type: 'starts', question: 'R: Color que resulta de mezclar blanco y rojo', answer: 'ROSA' },
        { type: 'starts', question: 'R: Aparato para escuchar música y noticias', answer: 'RADIO' },
        { type: 'starts', question: 'R: Curso de agua que desemboca en el mar', answer: 'RIO' },
        { type: 'starts', question: 'R: Prenda de vestir que cubre el cuerpo', answer: 'ROPA' },
        { type: 'contains', question: 'Contiene R: Vehículo de cuatro ruedas', answer: 'CARRO' },
        { type: 'contains', question: 'Contiene R: Lugar donde se guardan los libros', answer: 'LIBRERIA' },
        { type: 'contains', question: 'Contiene R: Instrumento musical de cuerda', answer: 'GUITARRA' }
    ],
    'S': [
        { type: 'starts', question: 'S: Estrella que nos da luz y calor', answer: 'SOL' },
        { type: 'starts', question: 'S: Mueble para sentarse', answer: 'SILLA' },
        { type: 'starts', question: 'S: Día de la semana después del viernes', answer: 'SABADO' },
        { type: 'starts', question: 'S: Mueble para descansar', answer: 'SOFA' },
        { type: 'contains', question: 'Contiene S: Lugar donde se estudia', answer: 'ESCUELA' },
        { type: 'contains', question: 'Contiene S: Deporte que se juega con pelota', answer: 'BASQUET' },
        { type: 'contains', question: 'Contiene S: Aparato para ver programas', answer: 'TELEVISION' }
    ],
    'T': [
        { type: 'starts', question: 'T: Reptil con caparazón', answer: 'TORTUGA' },
        { type: 'starts', question: 'T: Aparato para hablar a distancia', answer: 'TELEFONO' },
        { type: 'starts', question: 'T: Período de duración', answer: 'TIEMPO' },
        { type: 'starts', question: 'T: Instrumento musical de percusión', answer: 'TAMBOR' },
        { type: 'contains', question: 'Contiene T: Deporte que se juega con raqueta', answer: 'TENIS' },
        { type: 'contains', question: 'Contiene T: Aparato para ver programas', answer: 'TELEVISION' },
        { type: 'contains', question: 'Contiene T: Lugar donde se trabaja', answer: 'OFICINA' }
    ],
    'U': [
        { type: 'starts', question: 'U: Fruto morado que crece en racimos', answer: 'UVA' },
        { type: 'starts', question: 'U: Lugar donde se estudia después del colegio', answer: 'UNIVERSIDAD' },
        { type: 'starts', question: 'U: Instrumento para comer', answer: 'UTENSILIO' },
        { type: 'starts', question: 'U: Parte dura del dedo', answer: 'UÑA' },
        { type: 'contains', question: 'Contiene U: Deporte acuático con tabla', answer: 'SURF' },
        { type: 'contains', question: 'Contiene U: Lugar donde se hacen compras', answer: 'SUPERMERCADO' },
        { type: 'contains', question: 'Contiene U: Instrumento musical de cuerda', answer: 'GUITARRA' }
    ],
    'V': [
        { type: 'starts', question: 'V: Recipiente para contener líquidos', answer: 'VASO' },
        { type: 'starts', question: 'V: Estación del año más calurosa', answer: 'VERANO' },
        { type: 'starts', question: 'V: Color que resulta de mezclar azul y rojo', answer: 'VIOLETA' },
        { type: 'starts', question: 'V: Lugar donde se vive', answer: 'VIVIENDA' },
        { type: 'contains', question: 'Contiene V: Aparato para ver programas', answer: 'TELEVISION' },
        { type: 'contains', question: 'Contiene V: Deporte que se juega con pelota', answer: 'VOLEIBOL' },
        { type: 'contains', question: 'Contiene V: Medio de transporte que vuela', answer: 'AVION' }
    ],
    'W': [
        { type: 'starts', question: 'W: Red mundial de información', answer: 'WEB' },
        { type: 'starts', question: 'W: Bebida alcohólica escocesa', answer: 'WHISKY' },
        { type: 'starts', question: 'W: Sistema operativo de Microsoft', answer: 'WINDOWS' },
        { type: 'starts', question: 'W: Deporte acuático con tabla', answer: 'WINDSURF' },
        { type: 'contains', question: 'Contiene W: Deporte de lucha', answer: 'WRESTLING' },
        { type: 'contains', question: 'Contiene W: Lugar de trabajo', answer: 'WORKSHOP' },
        { type: 'contains', question: 'Contiene W: Red social', answer: 'TWITTER' }
    ],
    'X': [
        { type: 'starts', question: 'X: Instrumento musical de percusión con láminas', answer: 'XILOFONO' },
        { type: 'starts', question: 'X: Copia de un documento', answer: 'XEROCOPIA' },
        { type: 'starts', question: 'X: Gas noble', answer: 'XENON' },
        { type: 'starts', question: 'X: Planta adaptada a climas secos', answer: 'XEROFITA' },
        { type: 'contains', question: 'Contiene X: Deporte de combate', answer: 'BOXEO' },
        { type: 'contains', question: 'Contiene X: Ejercicio físico', answer: 'FLEXIONES' },
        { type: 'contains', question: 'Contiene X: Número romano que vale diez', answer: 'DIEZ' }
    ],
    'Y': [
        { type: 'starts', question: 'Y: Embarcación de recreo', answer: 'YATE' },
        { type: 'starts', question: 'Y: Hierba medicinal', answer: 'YERBA' },
        { type: 'starts', question: 'Y: Parte amarilla del huevo', answer: 'YEMA' },
        { type: 'starts', question: 'Y: Disciplina física y mental', answer: 'YOGA' },
        { type: 'contains', question: 'Contiene Y: Deporte que se juega con pelota ovalada', answer: 'RUGBY' },
        { type: 'contains', question: 'Contiene Y: Lugar donde se hacen experimentos', answer: 'LABORATORIO' },
        { type: 'contains', question: 'Contiene Y: Vehículo de dos ruedas', answer: 'BICICLETA' }
    ],
    'Z': [
        { type: 'starts', question: 'Z: Animal rayado parecido al caballo', answer: 'ZEBRA' },
        { type: 'starts', question: 'Z: Calzado que cubre el pie', answer: 'ZAPATO' },
        { type: 'starts', question: 'Z: Lugar donde se exhiben animales', answer: 'ZOO' },
        { type: 'starts', question: 'Z: Verdura de color naranja', answer: 'ZANAHORIA' },
        { type: 'contains', question: 'Contiene Z: Lugar público para pasear', answer: 'PLAZA' },
        { type: 'contains', question: 'Contiene Z: Deporte que se practica en el agua', answer: 'NATACION' },
        { type: 'contains', question: 'Contiene Z: Estilo musical', answer: 'JAZZ' }
    ]
};

        // Letras del rosco (sin Ñ)
        const letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

        // Elementos del DOM
        const setupScreen = document.getElementById('setupScreen');
        const countdownScreen = document.getElementById('countdownScreen');
        const gameScreen = document.getElementById('gameScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const pauseModal = document.getElementById('pauseModal');

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            initializeSetup();
            createRosco();
            setupEventListeners();
        });

        // Función para seleccionar pregunta aleatoria para cada letra
        function selectRandomQuestion(letter) {
            const availableQuestions = questionBank[letter].filter(q => 
                !gameState.usedQuestions.has(`${letter}-${q.answer}`)
            );
            
            if (availableQuestions.length === 0) {
                // Si no hay preguntas disponibles, usar cualquiera
                const randomIndex = Math.floor(Math.random() * questionBank[letter].length);
                return questionBank[letter][randomIndex];
            }
            
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            const selectedQuestion = availableQuestions[randomIndex];
            
            // Marcar como usada
            gameState.usedQuestions.add(`${letter}-${selectedQuestion.answer}`);
            
            return selectedQuestion;
        }

        // Configuración inicial
        function initializeSetup() {
            document.getElementById('setupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                startCountdown();
            });
        }

        // Crear el rosco visual con mejor centrado
        function createRosco() {
            const rosco = document.getElementById('rosco');
            rosco.innerHTML = ''; // Limpiar contenido previo
            
            const container = rosco.parentElement;
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            const centerX = containerWidth / 2;
            const centerY = containerHeight / 2;
            
            // Ajustar radio según el tamaño del contenedor
            const radius = Math.min(containerWidth, containerHeight) * 0.35;

            letters.forEach((letter, index) => {
                const angle = (index * 360 / letters.length) - 90; // -90 para empezar arriba
                const radian = (angle * Math.PI) / 180;
                
                const letterSize = window.innerWidth <= 400 ? 24 : 28;
                const x = centerX + radius * Math.cos(radian) - (letterSize / 2);
                const y = centerY + radius * Math.sin(radian) - (letterSize / 2);

                const letterElement = document.createElement('div');
                letterElement.className = 'letter';
                letterElement.textContent = letter;
                letterElement.style.left = x + 'px';
                letterElement.style.top = y + 'px';
                letterElement.dataset.letter = letter;
                letterElement.dataset.index = index;

                rosco.appendChild(letterElement);
            });
        }

        // Configurar event listeners
        function setupEventListeners() {
            document.getElementById('correctBtn').addEventListener('click', () => markAnswer('correct'));
            document.getElementById('incorrectBtn').addEventListener('click', () => markAnswer('incorrect'));
            document.getElementById('pasapalabraBtn').addEventListener('click', () => markAnswer('pasapalabra'));
            document.getElementById('resumeBtn').addEventListener('click', resumeGame);
            document.getElementById('pauseBtn').addEventListener('click', togglePause);
            document.getElementById('restartBtn').addEventListener('click', restartGame);

            window.addEventListener('resize', () => {
                if (gameState.gameStarted && !gameState.gameEnded) {
                    setTimeout(createRosco, 100);
                }
            });

            window.addEventListener('orientationchange', () => {
                if (gameState.gameStarted && !gameState.gameEnded) {
                    setTimeout(createRosco, 300);
                }
            });
        }

        // Iniciar cuenta regresiva CORREGIDA
        function startCountdown() {
            gameConfig.playerName = document.getElementById('playerName').value;
            gameConfig.gameTime = parseInt(document.getElementById('gameTime').value);
            
            setupScreen.style.display = 'none';
            countdownScreen.style.display = 'block';
            
            let count = 3; // Empezar en 3
            const countdownNumber = document.getElementById('countdownNumber');
            
            // Mostrar el primer número inmediatamente
            countdownNumber.textContent = count;
            countdownNumber.style.animation = 'countdownPulse 0.6s ease-in-out';
            
            const countdownInterval = setInterval(() => {
                count--;
                
                if (count > 0) {
                    countdownNumber.textContent = count;
                    countdownNumber.style.animation = 'none';
                    setTimeout(() => {
                        countdownNumber.style.animation = 'countdownPulse 0.6s ease-in-out';
                    }, 10);
                } else {
                    clearInterval(countdownInterval);
                    startGame();
                }
            }, 600);
        }

        // Iniciar juego
        function startGame() {
            gameState.timeLeft = gameConfig.gameTime;
            gameState.currentLetter = 0;
            gameState.gameStarted = true;
            gameState.gameEnded = false;
            gameState.gamePaused = false;
            gameState.stats = { correct: 0, incorrect: 0, pasapalabra: 0 };
            gameState.answers = {};
            gameState.usedQuestions = new Set();

            // Inicializar respuestas con preguntas aleatorias
            letters.forEach(letter => {
                const selectedQuestion = selectRandomQuestion(letter);
                gameState.answers[letter] = {
                    question: selectedQuestion.question,
                    correctAnswer: selectedQuestion.answer,
                    type: selectedQuestion.type,
                    status: 'pending'
                };
            });

            // Mostrar pantalla de juego
            countdownScreen.style.display = 'none';
            gameScreen.style.display = 'flex';

            // Configurar interfaz
            document.getElementById('playerNameDisplay').textContent = gameConfig.playerName;
            document.getElementById('timer').textContent = gameState.timeLeft;
            
            // Habilitar controles
            enableHostControls();
            
            // Mostrar primera pregunta
            showCurrentQuestion();
            
            // Iniciar cronómetro
            startTimer();
        }

        // Mostrar pregunta actual
        function showCurrentQuestion() {
            const currentLetter = letters[gameState.currentLetter];
            const questionData = gameState.answers[currentLetter];
            
            // Actualizar rosco visual
            updateRoscoDisplay();
            
            // Mostrar pregunta
            document.getElementById('questionText').textContent = questionData.question;
            document.getElementById('currentLetterBig').textContent = currentLetter;
            document.getElementById('correctAnswer').textContent = questionData.correctAnswer;
            
            // Mostrar tipo de pregunta
            const questionTypeElement = document.getElementById('questionType');
            questionTypeElement.textContent = questionData.type === 'starts' ? 
                'Empieza por la letra' : 'Contiene la letra';
        }

        // Actualizar display del rosco
        function updateRoscoDisplay() {
            const letterElements = document.querySelectorAll('.letter');
            letterElements.forEach((element, index) => {
                const letter = letters[index];
                const status = gameState.answers[letter].status;
                
                // Remover todas las clases de estado
                element.classList.remove('current', 'correct', 'incorrect', 'pasapalabra');
                
                // Agregar clase según estado
                if (index === gameState.currentLetter && !gameState.gameEnded) {
                    element.classList.add('current');
                } else if (status === 'correct') {
                    element.classList.add('correct');
                } else if (status === 'incorrect') {
                    element.classList.add('incorrect');
                } else if (status === 'pasapalabra') {
                    element.classList.add('pasapalabra');
                }
            });
        }

        // Marcar respuesta
        function markAnswer(type) {
            if (gameState.gameEnded || gameState.gamePaused) return;

            const currentLetter = letters[gameState.currentLetter];
            gameState.answers[currentLetter].status = type;
            gameState.stats[type]++;

            updateStats();

            if (type === 'incorrect') {
                // Pausar juego y mostrar modal
                pauseGameForIncorrect(currentLetter);
            } else {
                // Continuar con siguiente pregunta
                nextQuestion();
            }
        }

        // Pausar juego por respuesta incorrecta
        function pauseGameForIncorrect(letter) {
            gameState.gamePaused = true;
            disableHostControls();
            
            // Mostrar modal con respuesta correcta
            document.getElementById('wrongAnswerDisplay').textContent = gameState.answers[letter].correctAnswer;
            pauseModal.style.display = 'flex';
            
            // Actualizar rosco
            updateRoscoDisplay();
        }

        // Reanudar juego
        function resumeGame() {
            gameState.gamePaused = false;
            pauseModal.style.display = 'none';
            enableHostControls();
            nextQuestion();
        }

        // Toggle pausa manual
        function togglePause() {
            if (gameState.gameEnded) return;
            
            gameState.gamePaused = !gameState.gamePaused;
            const pauseBtn = document.getElementById('pauseBtn');
            const restartBtn = document.getElementById('restartBtn');
            const timer = document.getElementById('timer');
            
            if (gameState.gamePaused) {
                pauseBtn.textContent = '▶';
                restartBtn.style.display = 'block';
                timer.classList.add('paused');
                disableHostControls();
            } else {
                pauseBtn.textContent = '⏸';
                restartBtn.style.display = 'none';
                timer.classList.remove('paused');
                enableHostControls();
            }
        }

        // Reiniciar rosco
        function restartGame() {
            if (confirm('¿Estás seguro de que quieres reiniciar el rosco? Se generarán nuevas preguntas.')) {
                // Resetear estado del juego
                gameState.currentLetter = 0;
                gameState.gamePaused = false;
                gameState.stats = { correct: 0, incorrect: 0, pasapalabra: 0 };
                gameState.usedQuestions = new Set();
                
                // Generar nuevas preguntas aleatorias
                letters.forEach(letter => {
                    const selectedQuestion = selectRandomQuestion(letter);
                    gameState.answers[letter] = {
                        question: selectedQuestion.question,
                        correctAnswer: selectedQuestion.answer,
                        type: selectedQuestion.type,
                        status: 'pending'
                    };
                });
                
                // Actualizar interfaz
                updateStats();
                showCurrentQuestion();
                
                // Reanudar controles
                const pauseBtn = document.getElementById('pauseBtn');
                const restartBtn = document.getElementById('restartBtn');
                const timer = document.getElementById('timer');
                
                pauseBtn.textContent = '⏸';
                restartBtn.style.display = 'none';
                timer.classList.remove('paused');
                enableHostControls();
            }
        }

        // Siguiente pregunta
        function nextQuestion() {
            // Buscar siguiente pregunta pendiente
            let nextIndex = -1;
            for (let i = 0; i < letters.length; i++) {
                const checkIndex = (gameState.currentLetter + 1 + i) % letters.length;
                const letter = letters[checkIndex];
                if (gameState.answers[letter].status === 'pending') {
                    nextIndex = checkIndex;
                    break;
                }
            }

            if (nextIndex === -1) {
                // No hay más preguntas pendientes
                endGame();
                return;
            }

            gameState.currentLetter = nextIndex;
            showCurrentQuestion();
        }

        // Habilitar controles del anfitrión
        function enableHostControls() {
            document.getElementById('correctBtn').disabled = false;
            document.getElementById('incorrectBtn').disabled = false;
            document.getElementById('pasapalabraBtn').disabled = false;
        }

        // Deshabilitar controles del anfitrión
        function disableHostControls() {
            document.getElementById('correctBtn').disabled = true;
            document.getElementById('incorrectBtn').disabled = true;
            document.getElementById('pasapalabraBtn').disabled = true;
        }

        // Actualizar estadísticas
        function updateStats() {
            document.getElementById('correctCount').textContent = gameState.stats.correct;
            document.getElementById('incorrectCount').textContent = gameState.stats.incorrect;
            document.getElementById('pasapalabraCount').textContent = gameState.stats.pasapalabra;
        }

        // Iniciar cronómetro
        function startTimer() {
            gameState.timer = setInterval(() => {
                if (!gameState.gamePaused) {
                    gameState.timeLeft--;
                    const timerElement = document.getElementById('timer');
                    timerElement.textContent = gameState.timeLeft;
                    
                    // Agregar efecto de advertencia cuando quedan 10 segundos
                    if (gameState.timeLeft <= 10) {
                        timerElement.classList.add('warning');
                    }
                    
                    if (gameState.timeLeft <= 0) {
                        endGame();
                    }
                }
            }, 1000);
        }

        // Terminar juego
        function endGame() {
            if (gameState.gameEnded) return;
            
            gameState.gameEnded = true;
            gameState.gamePaused = false;
            clearInterval(gameState.timer);
            disableHostControls();
            
            // Cerrar modal si está abierto
            pauseModal.style.display = 'none';
            
            // Ocultar botones de control
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            
            // Actualizar rosco final
            updateRoscoDisplay();
            
            // Mostrar alerta
            alert('🏁 JUEGO FINALIZADO');
            
            // Mostrar resultados
            setTimeout(() => {
                showResults();
            }, 500);
        }

        // Mostrar resultados
        function showResults() {
            gameScreen.style.display = 'none';
            resultsScreen.style.display = 'block';
            
            // Información del jugador
            document.getElementById('finalPlayerName').textContent = gameConfig.playerName;
            
            // Estadísticas finales
            document.getElementById('finalCorrect').textContent = gameState.stats.correct;
            document.getElementById('finalIncorrect').textContent = gameState.stats.incorrect;
            document.getElementById('finalPasapalabra').textContent = gameState.stats.pasapalabra;
            
            const timeUsed = gameConfig.gameTime - gameState.timeLeft;
            document.getElementById('finalTime').textContent = timeUsed + 's';
            
            // Tabla de resultados
            const tableBody = document.getElementById('resultsTableBody');
            tableBody.innerHTML = '';
            
            letters.forEach(letter => {
                const answer = gameState.answers[letter];
                const row = document.createElement('tr');
                row.className = answer.status;
                
                const statusText = {
                    'correct': 'Correcta ✓',
                    'incorrect': 'Incorrecta ✗',
                    'pasapalabra': 'Pasapalabra ⏭',
                    'pending': 'Sin responder'
                };

                const typeText = answer.type === 'starts' ? 'Empieza por' : 'Contiene';
                
                row.innerHTML = `
                    <td><strong>${letter}</strong></td>
                    <td class="question-type-cell">${typeText}</td>
                    <td>${answer.question}</td>
                    <td><strong>${answer.correctAnswer}</strong></td>
                    <td>${statusText[answer.status]}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>